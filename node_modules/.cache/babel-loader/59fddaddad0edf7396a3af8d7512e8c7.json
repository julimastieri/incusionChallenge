{"ast":null,"code":"var _jsxFileName = \"/Users/julianmastieri/Documents/GitHub/incusioonChallenge/src/pages/StatusPage/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport \"./StatusPage.css\";\nimport Table from \"../../components/Table/index\";\nimport { headers, apiNames } from \"./constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction StatusPage() {\n  _s();\n\n  const [healthStatuses, setHealthStatuses] = useState([]);\n  const [intervalTime, setIntervalTime] = useState(0);\n  useEffect(() => {\n    const fetchInterval = setInterval(() => {\n      const statusPromises = apiNames.map((apiName, index) => fetch(`https://api.factoryfour.com/${apiName}/health/status`).then(res => res.json()).then(data => {\n        return { ...data,\n          name: apiNames[index]\n        };\n      }).catch(() => {\n        return {\n          success: false,\n          message: `Unhealthy`,\n          name: apiNames[index]\n        };\n      }));\n      Promise.all(statusPromises).then(allResponses => setHealthStatuses(allResponses));\n      if (intervalTime === 0) setIntervalTime(1000);\n    }, intervalTime);\n    return () => clearInterval(fetchInterval);\n  }, [intervalTime]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"status-page\",\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      title: \"Status Table\",\n      headers: headers,\n      healthStatuses: healthStatuses\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StatusPage, \"Zx3ySyqOuTqOecfsse64bBVCyQs=\");\n\n_c = StatusPage;\nexport default StatusPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"StatusPage\");","map":{"version":3,"names":["useEffect","useState","Table","headers","apiNames","StatusPage","healthStatuses","setHealthStatuses","intervalTime","setIntervalTime","fetchInterval","setInterval","statusPromises","map","apiName","index","fetch","then","res","json","data","name","catch","success","message","Promise","all","allResponses","clearInterval"],"sources":["/Users/julianmastieri/Documents/GitHub/incusioonChallenge/src/pages/StatusPage/index.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./StatusPage.css\";\nimport Table from \"../../components/Table/index\";\nimport { HealthStatus } from \"../../types\";\nimport { headers, apiNames } from \"./constants\";\n\nfunction StatusPage() {\n  const [healthStatuses, setHealthStatuses] = useState<HealthStatus[]>([]);\n  const [intervalTime, setIntervalTime] = useState<number>(0);\n\n  useEffect(() => {\n    const fetchInterval = setInterval(() => {\n      const statusPromises: Promise<HealthStatus>[] = apiNames.map(\n        (apiName, index) =>\n          fetch(`https://api.factoryfour.com/${apiName}/health/status`)\n            .then((res) => res.json())\n            .then((data) => {\n              return { ...data, name: apiNames[index] };\n            })\n            .catch(() => {\n              return {\n                success: false,\n                message: `Unhealthy`,\n                name: apiNames[index],\n              };\n            })\n      );\n\n      Promise.all(statusPromises).then((allResponses) =>\n        setHealthStatuses(allResponses)\n      );\n      if (intervalTime === 0) setIntervalTime(1000);\n    }, intervalTime);\n\n    return () => clearInterval(fetchInterval);\n  }, [intervalTime]);\n\n  return (\n    <div className=\"status-page\">\n      <Table\n        title=\"Status Table\"\n        headers={headers}\n        healthStatuses={healthStatuses}\n      />\n    </div>\n  );\n}\n\nexport default StatusPage;\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAO,kBAAP;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AAEA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,aAAlC;;;AAEA,SAASC,UAAT,GAAsB;EAAA;;EACpB,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCN,QAAQ,CAAiB,EAAjB,CAApD;EACA,MAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCR,QAAQ,CAAS,CAAT,CAAhD;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMU,aAAa,GAAGC,WAAW,CAAC,MAAM;MACtC,MAAMC,cAAuC,GAAGR,QAAQ,CAACS,GAAT,CAC9C,CAACC,OAAD,EAAUC,KAAV,KACEC,KAAK,CAAE,+BAA8BF,OAAQ,gBAAxC,CAAL,CACGG,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,IAAD,IAAU;QACd,OAAO,EAAE,GAAGA,IAAL;UAAWC,IAAI,EAAEjB,QAAQ,CAACW,KAAD;QAAzB,CAAP;MACD,CAJH,EAKGO,KALH,CAKS,MAAM;QACX,OAAO;UACLC,OAAO,EAAE,KADJ;UAELC,OAAO,EAAG,WAFL;UAGLH,IAAI,EAAEjB,QAAQ,CAACW,KAAD;QAHT,CAAP;MAKD,CAXH,CAF4C,CAAhD;MAgBAU,OAAO,CAACC,GAAR,CAAYd,cAAZ,EAA4BK,IAA5B,CAAkCU,YAAD,IAC/BpB,iBAAiB,CAACoB,YAAD,CADnB;MAGA,IAAInB,YAAY,KAAK,CAArB,EAAwBC,eAAe,CAAC,IAAD,CAAf;IACzB,CArBgC,EAqB9BD,YArB8B,CAAjC;IAuBA,OAAO,MAAMoB,aAAa,CAAClB,aAAD,CAA1B;EACD,CAzBQ,EAyBN,CAACF,YAAD,CAzBM,CAAT;EA2BA,oBACE;IAAK,SAAS,EAAC,aAAf;IAAA,uBACE,QAAC,KAAD;MACE,KAAK,EAAC,cADR;MAEE,OAAO,EAAEL,OAFX;MAGE,cAAc,EAAEG;IAHlB;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AASD;;GAxCQD,U;;KAAAA,U;AA0CT,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/julianmastieri/Documents/GitHub/incusioonChallenge/src/pages/StatusPage/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport \"./StatusPage.css\";\nimport Table from \"../../components/Table/index\";\nimport { headers, apiNames } from \"./constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction StatusPage() {\n  _s();\n\n  const [healthStatuses, setHealthStatuses] = useState([]);\n  const [intervalTime, setIntervalTime] = useState(0);\n  useEffect(() => {\n    const statusPromises = apiNames.map((apiName, index) => fetch(`https://api.factoryfour.com/${apiName}/health/status`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"access-control-allow-origin\": \"*\",\n        \"Access-Control-Allow-Headers\": \"Origin, X-Requested-With, Content-Type, Accept\"\n      }\n    }).then(res => res.json()).then(data => {\n      return { ...data,\n        name: apiNames[index]\n      };\n    }).catch(error => {\n      return {\n        success: false,\n        message: `Unhealthy`,\n        name: apiNames[index]\n      };\n    }));\n    const fetchInterval = setInterval(() => {\n      Promise.all(statusPromises).then(allResponses => setHealthStatuses(allResponses));\n      if (intervalTime === 0) setIntervalTime(15000);\n    }, intervalTime);\n    return () => clearInterval(fetchInterval);\n  }, [intervalTime]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"status-page\",\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      title: \"Status Table\",\n      headers: headers,\n      healthStatuses: healthStatuses\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n\n_s(StatusPage, \"Zx3ySyqOuTqOecfsse64bBVCyQs=\");\n\n_c = StatusPage;\nexport default StatusPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"StatusPage\");","map":{"version":3,"names":["useEffect","useState","Table","headers","apiNames","StatusPage","healthStatuses","setHealthStatuses","intervalTime","setIntervalTime","statusPromises","map","apiName","index","fetch","method","then","res","json","data","name","catch","error","success","message","fetchInterval","setInterval","Promise","all","allResponses","clearInterval"],"sources":["/Users/julianmastieri/Documents/GitHub/incusioonChallenge/src/pages/StatusPage/index.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./StatusPage.css\";\nimport Table from \"../../components/Table/index\";\nimport { HealthStatus } from \"../../types\";\nimport { headers, apiNames } from \"./constants\";\n\nfunction StatusPage() {\n  const [healthStatuses, setHealthStatuses] = useState<HealthStatus[]>([]);\n  const [intervalTime, setIntervalTime] = useState<number>(0);\n\n  useEffect(() => {\n    const statusPromises: Promise<HealthStatus>[] = apiNames.map(\n      (apiName, index) =>\n        fetch(`https://api.factoryfour.com/${apiName}/health/status`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"access-control-allow-origin\": \"*\",\n            \"Access-Control-Allow-Headers\":\n              \"Origin, X-Requested-With, Content-Type, Accept\",\n          },\n        })\n          .then((res) => res.json())\n          .then((data) => {\n            return { ...data, name: apiNames[index] };\n          })\n          .catch((error) => {\n            return { success: false, message: `Unhealthy`,  name: apiNames[index] };\n          })\n    );\n\n    const fetchInterval = setInterval(() => {\n      Promise.all(statusPromises).then((allResponses) =>\n        setHealthStatuses(allResponses)\n      );\n      if (intervalTime === 0) setIntervalTime(15000);\n    }, intervalTime);\n\n    return () => clearInterval(fetchInterval);\n  }, [intervalTime]);\n\n  return (\n    <div className=\"status-page\">\n      <Table\n        title=\"Status Table\"\n        headers={headers}\n        healthStatuses={healthStatuses}\n      />\n    </div>\n  );\n}\n\nexport default StatusPage;\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAO,kBAAP;AACA,OAAOC,KAAP,MAAkB,8BAAlB;AAEA,SAASC,OAAT,EAAkBC,QAAlB,QAAkC,aAAlC;;;AAEA,SAASC,UAAT,GAAsB;EAAA;;EACpB,MAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCN,QAAQ,CAAiB,EAAjB,CAApD;EACA,MAAM,CAACO,YAAD,EAAeC,eAAf,IAAkCR,QAAQ,CAAS,CAAT,CAAhD;EAEAD,SAAS,CAAC,MAAM;IACd,MAAMU,cAAuC,GAAGN,QAAQ,CAACO,GAAT,CAC9C,CAACC,OAAD,EAAUC,KAAV,KACEC,KAAK,CAAE,+BAA8BF,OAAQ,gBAAxC,EAAyD;MAC5DG,MAAM,EAAE,KADoD;MAE5DZ,OAAO,EAAE;QACP,gBAAgB,kBADT;QAEP,+BAA+B,GAFxB;QAGP,gCACE;MAJK;IAFmD,CAAzD,CAAL,CASGa,IATH,CASSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EATjB,EAUGF,IAVH,CAUSG,IAAD,IAAU;MACd,OAAO,EAAE,GAAGA,IAAL;QAAWC,IAAI,EAAEhB,QAAQ,CAACS,KAAD;MAAzB,CAAP;IACD,CAZH,EAaGQ,KAbH,CAaUC,KAAD,IAAW;MAChB,OAAO;QAAEC,OAAO,EAAE,KAAX;QAAkBC,OAAO,EAAG,WAA5B;QAAyCJ,IAAI,EAAEhB,QAAQ,CAACS,KAAD;MAAvD,CAAP;IACD,CAfH,CAF4C,CAAhD;IAoBA,MAAMY,aAAa,GAAGC,WAAW,CAAC,MAAM;MACtCC,OAAO,CAACC,GAAR,CAAYlB,cAAZ,EAA4BM,IAA5B,CAAkCa,YAAD,IAC/BtB,iBAAiB,CAACsB,YAAD,CADnB;MAGA,IAAIrB,YAAY,KAAK,CAArB,EAAwBC,eAAe,CAAC,KAAD,CAAf;IACzB,CALgC,EAK9BD,YAL8B,CAAjC;IAOA,OAAO,MAAMsB,aAAa,CAACL,aAAD,CAA1B;EACD,CA7BQ,EA6BN,CAACjB,YAAD,CA7BM,CAAT;EA+BA,oBACE;IAAK,SAAS,EAAC,aAAf;IAAA,uBACE,QAAC,KAAD;MACE,KAAK,EAAC,cADR;MAEE,OAAO,EAAEL,OAFX;MAGE,cAAc,EAAEG;IAHlB;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AASD;;GA5CQD,U;;KAAAA,U;AA8CT,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}